#!/bin/bash

# Check if a directory was provided
if [ -z "$1" ]; then
  echo "Usage: $0 <directory>"
  exit 1
fi

DIRECTORY="$1"

# Store found files in an array, ensuring proper handling of spaces
mapfile -d '' FILES < <(find "$DIRECTORY" -type f -size +5G -print0)

# Check if any files were found
if [ ${#FILES[@]} -eq 0 ]; then
  echo "No files larger than 5GB found in $DIRECTORY."
  exit 0
fi

# Loop through each file
for FILE in "${FILES[@]}"; do
  FILE_SIZE=$(du -h -- "$FILE" | cut -f1)  # Get human-readable file size

  echo -e "\nFile: $FILE ($FILE_SIZE)"
  read -p "Do you want to delete this file? (y/n): " CONFIRMATION

  if [[ "$CONFIRMATION" == "y" || "$CONFIRMATION" == "Y" ]]; then
    rm -v -- "$FILE"
    echo "Deleted: $FILE"
  else
    echo "Skipped: $FILE"
  fi
done

